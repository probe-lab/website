---
title: Data Provenance
---
# Data Provenance

The majority of the data used to generate the plots and charts on this site originates from the experiments run by 
the ProbeLab team as part of its continuous measurement infrastructure (CMI).

The principal measurement tools ([Nebula](/tools/nebula), [Parsec](/tools/parsec) and [Tiros](/tools/tiros)) write 
data to a single Postgresql database ("the CMI database") which is used to populate the plots on this site, 
perform general analysis and to generate the [IPFS weekly reports](https://github.com/protocol/network-measurements/tree/master/reports).

Some data used on this site is sourced from external systems and aggregated into the CMI database by a system called [Caracol](https://github.com/plprobelab/caracol). Caracol is configured to run specific queries against these external systems on a periodic basis, usually daily or weekly, to build
a time series of data points. The external systems currently aggregated for use in plots on this site are:

 - Elasticsearch
   - ipfs.io / dweb.link access log summaries - used for counts of unique client IP addresses 
   - IPFS bootstrap node access log summaries - used for counts of unique peer IDs and unique software agents
 - Prometheus
   - ipfs.io / dweb.link http metrics - used for request counts
   - cid.contact  http metrics - used for IPNI request counts

## Access to Data

Read access to the ProbeLab CMI database may be granted to collaborators on request. Access to other data sources such as
Protocol Labs Prometheus and Elasticsearch instances may also be possible in some circumstances. Please 
[contact the team](/about#contact) through any of the usual channels to discuss your requirements. 

## Determining Plot Data Sources

The key to finding the source of any plot on the site is to determine its _plot definition_. A plot definition is a 
YAML file which contains the source of each dataset shown on the plot, additional transformation rules and presentation information.
The source of the data is generally a query although it may be a static dataset. A static dataset is generally only used to supplement early history of a
a plot where the original measurements are no longer available from an online database. 

Plot definitions are interpreted by the [Ashby](https://github.com/plprobelab/ashby) templating system to periodically generate a corresponding JSON file containing the raw data obtained from the source and layout instructions. These JSON files are used by the embedded [Plotly](https://plotly.com/) component on each page to render the plot. 

Usually the name of the plot definition is used to generate the HTML anchor of the plot. For example the [Recent Kubo Versions Over Time](/ipfsdht/#recent-kubo-versions-over-time) plot has an anchor of `#recent-kubo-versions-over-time` which corresponds to the plotdef `recent-kubo-versions-over-time.yaml`. Sometimes the anchor has been adjusted to be more readable. In any case you can inspect the source of the page. Each plot contains some Javascript which imports the JSON file generated by Ashby. For example the page displaying the Recent Kubo Versions Over Time plot conttains the following script:

```
d3.json("../../plots/latest/recent-kubo-versions-over-time.json").then(function (fig) {
```

The raw data JSON file will have the same name as the plot definition, in this case `recent-kubo-versions-over-time.json` corresponds to `recent-kubo-versions-over-time.yaml`.

All plot definitions are are publicly accessible in the [website repository](https://github.com/plprobelab/website/tree/main/config):

 - The [plotdefs-website](https://github.com/plprobelab/website/tree/main/config/plotdefs-website) directory contains definitions for plots in the website section of the site. These are templated such that they are executed against each website featured on the site. 

 - The [plotdefs-ipni](https://github.com/plprobelab/website/tree/main/config/plotdefs-ipni) directory contains definitions for plots in the IPNI section of this site. These are also templated such that they are executed against each featured IPNI provider. 

 - All other plot definitions are contained in the [plotdefs](https://github.com/plprobelab/website/tree/main/config/plotdefs) directory.

You can inspect the plot definition to see the exact query used to generate the plot on the page. Typically queries will be written in SQL to be
run against the CMI database and may be quite complex as in the case of [recent-kubo-versions-over-time.yaml](https://github.com/plprobelab/website/blob/main/config/plotdefs/recent-kubo-versions-over-time.yaml) or straightforward as in [dht-server-peers-current.yaml](https://github.com/plprobelab/website/blob/main/config/plotdefs/dht-server-peers-current.yaml)




